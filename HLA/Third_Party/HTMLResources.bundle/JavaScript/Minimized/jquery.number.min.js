!function(e){"use strict";function t(e,t){if(this.createTextRange){var r=this.createTextRange();r.collapse(!0),r.moveStart("character",e),r.moveEnd("character",t-e),r.select()}else this.setSelectionRange&&(this.focus(),this.setSelectionRange(e,t))}function r(e){var t=this.value.length;if(e="start"==e.toLowerCase()?"Start":"End",document.selection){var r,n,a,i=document.selection.createRange();return r=i.duplicate(),r.expand("textedit"),r.setEndPoint("EndToEnd",i),n=r.text.length-i.text.length,a=n+i.text.length,"Start"==e?n:a}return"undefined"!=typeof this["selection"+e]&&(t=this["selection"+e]),t}var n={codes:{46:127,188:44,109:45,190:46,191:47,192:96,220:92,222:39,221:93,219:91,173:45,187:61,186:59,189:45,110:46},shifts:{96:"~",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",48:")",45:"_",61:"+",91:"{",93:"}",92:"|",59:":",39:'"',44:"<",46:">",47:"?"}};e.fn.number=function(a,i,s,o){o="undefined"==typeof o?",":o,s="undefined"==typeof s?".":s,i="undefined"==typeof i?0:i;var l="\\u"+("0000"+s.charCodeAt(0).toString(16)).slice(-4),u=new RegExp("[^"+l+"0-9]","g"),c=new RegExp(l,"g");return a===!0?this.is("input:text")?this.on({"keydown.format":function(a){var l=e(this),u=l.data("numFormat"),c=a.keyCode?a.keyCode:a.which,d="",g=r.apply(this,["start"]),f=r.apply(this,["end"]),p="",h=!1;if(n.codes.hasOwnProperty(c)&&(c=n.codes[c]),!a.shiftKey&&c>=65&&90>=c?c+=32:!a.shiftKey&&c>=69&&105>=c?c-=48:a.shiftKey&&n.shifts.hasOwnProperty(c)&&(d=n.shifts[c]),""==d&&(d=String.fromCharCode(c)),8!=c&&45!=c&&127!=c&&d!=s&&!d.match(/[0-9]/)){var m=a.keyCode?a.keyCode:a.which;if(46==m||8==m||127==m||9==m||27==m||13==m||(65==m||82==m||80==m||83==m||70==m||72==m||66==m||74==m||84==m||90==m||61==m||173==m||48==m)&&(a.ctrlKey||a.metaKey)===!0||(86==m||67==m||88==m)&&(a.ctrlKey||a.metaKey)===!0||m>=35&&39>=m||m>=112&&123>=m)return;return a.preventDefault(),!1}if(0==g&&f==this.value.length?8==c?(g=f=1,this.value="",u.init=i>0?-1:0,u.c=i>0?-(i+1):0,t.apply(this,[0,0])):d==s?(g=f=1,this.value="0"+s+new Array(i+1).join("0"),u.init=i>0?1:0,u.c=i>0?-(i+1):0):45==c?(g=f=2,this.value="-0"+s+new Array(i+1).join("0"),u.init=i>0?1:0,u.c=i>0?-(i+1):0,t.apply(this,[2,2])):(u.init=i>0?-1:0,u.c=i>0?-i:0):u.c=f-this.value.length,u.isPartialSelection=g==f?!1:!0,i>0&&d==s&&g==this.value.length-i-1)u.c++,u.init=Math.max(0,u.init),a.preventDefault(),h=this.value.length+u.c;else if(45!=c||0==g&&0!=this.value.indexOf("-"))if(d==s)u.init=Math.max(0,u.init),a.preventDefault();else if(i>0&&127==c&&g==this.value.length-i-1)a.preventDefault();else if(i>0&&8==c&&g==this.value.length-i)a.preventDefault(),u.c--,h=this.value.length+u.c;else if(i>0&&127==c&&g>this.value.length-i-1){if(""===this.value)return;"0"!=this.value.slice(g,g+1)&&(p=this.value.slice(0,g)+"0"+this.value.slice(g+1),l.val(p)),a.preventDefault(),h=this.value.length+u.c}else if(i>0&&8==c&&g>this.value.length-i){if(""===this.value)return;"0"!=this.value.slice(g-1,g)&&(p=this.value.slice(0,g-1)+"0"+this.value.slice(g),l.val(p)),a.preventDefault(),u.c--,h=this.value.length+u.c}else 127==c&&this.value.slice(g,g+1)==o?a.preventDefault():8==c&&this.value.slice(g-1,g)==o?(a.preventDefault(),u.c--,h=this.value.length+u.c):i>0&&g==f&&this.value.length>i+1&&g>this.value.length-i-1&&isFinite(+d)&&!a.metaKey&&!a.ctrlKey&&!a.altKey&&1===d.length&&(p=f===this.value.length?this.value.slice(0,g-1):this.value.slice(0,g)+this.value.slice(g+1),this.value=p,h=g);else a.preventDefault();h!==!1&&t.apply(this,[h,h]),l.data("numFormat",u)},"keyup.format":function(n){var a,s=e(this),o=s.data("numFormat"),l=n.keyCode?n.keyCode:n.which,u=r.apply(this,["start"]),c=r.apply(this,["end"]);0!==u||0!==c||189!==l&&109!==l||(s.val("-"+s.val()),u=1,o.c=1-this.value.length,o.init=1,s.data("numFormat",o),a=this.value.length+o.c,t.apply(this,[a,a])),""===this.value||(48>l||l>57)&&(96>l||l>105)&&8!==l&&46!==l&&110!==l||(s.val(s.val()),i>0&&(o.init<1?(u=this.value.length-i-(o.init<0?1:0),o.c=u-this.value.length,o.init=1,s.data("numFormat",o)):u>this.value.length-i&&8!=l&&(o.c++,s.data("numFormat",o))),46!=l||o.isPartialSelection||(o.c++,s.data("numFormat",o)),a=this.value.length+o.c,t.apply(this,[a,a]))},"paste.format":function(t){var r=e(this),n=t.originalEvent,a=null;return window.clipboardData&&window.clipboardData.getData?a=window.clipboardData.getData("Text"):n.clipboardData&&n.clipboardData.getData&&(a=n.clipboardData.getData("text/plain")),r.val(a),t.preventDefault(),!1}}).each(function(){var t=e(this).data("numFormat",{c:-(i+1),decimals:i,thousands_sep:o,dec_point:s,regex_dec_num:u,regex_dec:c,init:this.value.indexOf(".")?!0:!1});""!==this.value&&t.val(t.val())}):this.each(function(){var t=e(this),r=+t.text().replace(u,"").replace(c,".");t.number(isFinite(r)?+r:0,i,s,o)}):this.text(e.number.apply(window,arguments))};var a=null,i=null;e.isPlainObject(e.valHooks.text)?(e.isFunction(e.valHooks.text.get)&&(a=e.valHooks.text.get),e.isFunction(e.valHooks.text.set)&&(i=e.valHooks.text.set)):e.valHooks.text={},e.valHooks.text.get=function(t){var r,n=e(t),i=n.data("numFormat");return i?""===t.value?"":(r=+t.value.replace(i.regex_dec_num,"").replace(i.regex_dec,"."),(0===t.value.indexOf("-")?"-":"")+(isFinite(r)?r:0)):e.isFunction(a)?a(t):void 0},e.valHooks.text.set=function(t,r){var n=e(t),a=n.data("numFormat");if(a){var s=e.number(r,a.decimals,a.dec_point,a.thousands_sep);return e.isFunction(i)?i(t,s):t.value=s}return e.isFunction(i)?i(t,r):void 0},e.number=function(e,t,r,n){n="undefined"==typeof n?"1000"!==new Number(1e3).toLocaleString()?new Number(1e3).toLocaleString().charAt(1):"":n,r="undefined"==typeof r?new Number(.1).toLocaleString().charAt(1):r,t=isFinite(+t)?Math.abs(t):0;var a="\\u"+("0000"+r.charCodeAt(0).toString(16)).slice(-4),i="\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4);e=(e+"").replace(".",r).replace(new RegExp(i,"g"),"").replace(new RegExp(a,"g"),".").replace(new RegExp("[^0-9+-Ee.]","g"),"");var s=isFinite(+e)?+e:0,o="",l=function(e,t){return""+ +(Math.round(e+"e+"+t)+"e-"+t)};return o=(t?l(s,t):""+Math.round(s)).split("."),o[0].length>3&&(o[0]=o[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,n)),(o[1]||"").length<t&&(o[1]=o[1]||"",o[1]+=new Array(t-o[1].length+1).join("0")),o.join(r)}}(jQuery);
